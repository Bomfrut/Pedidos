<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="img/icone.png" type="image/png" />
  <title>Bom frut</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0; 
      padding: 0;
      padding-top: 80px; /* espaço para o menu fixo */
      background-color: #f4f4f4;
      background-image: url('img/fundo.png');
      background-repeat: no-repeat;
      background-size: cover;
      background-position: center center;
      background-attachment: fixed;
    }

    @media (max-width: 600px) {
      body {
        background-attachment: scroll;
        background-position: top center;
        padding-top: 70px; /* altura menor no mobile */
      }
    }

    header {
      display: none;
    }

    /* Menu fixo */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      display: flex;
      align-items: center;
      background-color: #000080;
      padding: 10px 20px;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: space-between;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .nav-left {
      display: flex;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    nav img {
      height: 80px;
      width: auto;
      max-width: 150px;
      cursor: pointer;
      flex-shrink: 0;
      object-fit: contain;
    }

    /* Menu desktop - botões visíveis */
    .nav-buttons {
      display: flex;
      gap: 20px;
      align-items: center;
    }

    .nav-buttons button {
      background-color: #000080;
      color: white;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
      border-radius: 6px;
      transition: background-color 0.3s ease;
      flex-shrink: 0;
    }

    .nav-buttons button:hover {
      background-color: #333399;
    }

    .nav-buttons button.active {
      background-color: #FFA500;
      color: #000;
    }

    /* Menu hambúrguer */
    .hamburger {
      display: none;
      flex-direction: column;
      cursor: pointer;
      padding: 8px;
      background: none;
      border: none;
    }

    .hamburger span {
      width: 25px;
      height: 3px;
      background-color: white;
      margin: 3px 0;
      transition: 0.3s;
      border-radius: 2px;
    }

    /* Animação do hambúrguer quando ativo */
    .hamburger.active span:nth-child(1) {
      transform: rotate(-45deg) translate(-5px, 6px);
    }

    .hamburger.active span:nth-child(2) {
      opacity: 0;
    }

    .hamburger.active span:nth-child(3) {
      transform: rotate(45deg) translate(-5px, -6px);
    }

    /* Menu mobile - escondido por padrão */
    .mobile-menu {
      position: fixed;
      top: 70px;
      right: -100%;
      width: 250px;
      height: calc(100vh - 70px);
      background-color: #000080;
      padding: 20px 0;
      transition: right 0.3s ease;
      z-index: 999;
      box-shadow: -2px 0 5px rgba(0,0,0,0.1);
    }

    .mobile-menu.active {
      right: 0;
    }

    .mobile-menu button {
      display: block;
      width: 100%;
      background-color: transparent;
      color: white;
      border: none;
      padding: 15px 20px;
      cursor: pointer;
      font-weight: bold;
      font-size: 16px;
      text-align: left;
      transition: background-color 0.3s ease;
    }

    .mobile-menu button:hover {
      background-color: #333399;
    }

    .mobile-menu button.active {
      background-color: #FFA500;
      color: #000;
    }

    /* Overlay para fechar menu mobile */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 998;
      display: none;
    }

    .overlay.active {
      display: block;
    }

    /* Responsividade */
    @media (max-width: 768px) {
      .nav-buttons {
        display: none;
      }

      .hamburger {
        display: flex;
      }

      nav {
        padding: 10px 15px;
      }
    }

    @media (max-width: 768px) {
      nav img {
        height: 65px;
        width: 100px;
        max-width: 100px;
      }
      
      body {
        padding-top: 60px;
      }
      
      .mobile-menu {
        top: 60px;
        height: calc(100vh - 60px);
      }
    }

    /* Resto do CSS permanece igual */
    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 20px;
    }

    .card {
      background-color: white;
      margin: 10px;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
      width: 200px;
    }

    .card img {
      width: 30%;
      border-radius: 8px;
    }

    .card h3 {
      margin: 10px 0;
    }

    .card p {
      margin: 5px 0;
      font-size: 14px;
    }

    .card .preco {
      font-weight: bold;
    }

    .card button, .card .btn-small {
      background-color: #333;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }

    .card button {
      padding: 10px;
      margin-top: 6px;
    }

    .card button:hover, .card .btn-small:hover {
      background-color: #555;
    }

    .btn-small {
      padding: 4px 8px;
      margin: 0 4px;
      font-weight: bold;
    }

    /* Floating buttons */
    .floating-buttons {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      z-index: 9999;
    }

    .whatsapp-btn {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background-color: #25D366;
      box-shadow: 0 4px 8px rgba(0,0,0,0.25);
      text-decoration: none;
      border: none;
      cursor: pointer;
    }
    
    .whatsapp-btn svg { 
      width: 28px; 
      height: 28px; 
      fill: #fff; 
    }

    .floating-buttons .sacola {
      background-color: #333;
      color: white;
      padding: 12px 16px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border: none;
    }

    .floating-buttons .sacola span {
      position: absolute;
      top: -6px;
      right: -6px;
      background-color: red;
      color: white;
      font-size: 12px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      text-align: center;
      line-height: 20px;
    }

    .popup {
      display: none;
      position: fixed;
      top: 0; 
      left: 0;
      width: 100%; 
      height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 10000;
    }

    .popup-content {
      background: white;
      padding: 20px;
      border-radius: 8px;
      width: 340px;
      max-height: 80vh;
      overflow: auto;
    }

    .popup-content h2 {
      margin-top: 0;
    }

    .popup-content ul {
      padding: 0;
      list-style: none;
      margin: 0;
    }

    .popup-content li {
      margin: 10px 0;
      font-size: 14px;
      border-bottom: 1px solid #eee;
      padding-bottom: 8px;
    }

    .popup-content input, .popup-content select {
      width: 100%;
      padding: 8px;
      margin: 5px 0;
      box-sizing: border-box;
    }

    .fechar {
      background: red;
      color: white;
      padding: 8px 10px;
      cursor: pointer;
      border: none;
      margin-top: 10px;
      border-radius: 4px;
    }

    .enviar {
      background: green;
      color: white;
      padding: 10px;
      cursor: pointer;
      border: none;
      width: 100%;
      border-radius: 4px;
      margin-top: 5px;
    }
  </style>
</head>
<body>

<header>
  <!-- Título escondido -->
</header>

<nav>
  <div class="nav-left">
    <img src="img/logo.png" alt="Logo" />
    
    <!-- Menu desktop -->
    <div class="nav-buttons">
      <button id="btnPicole" class="active" onclick="mudarCategoria('picole')">Picolés</button>
      <button id="btnSorvete" onclick="mudarCategoria('sorvete')">Sorvetes</button>
      <button id="btnGarrafinha" onclick="mudarCategoria('garrafinha')">Garrafinhas</button>
    </div>
  </div>

  <!-- Menu hambúrguer (só aparece no mobile) -->
  <button class="hamburger" onclick="toggleMobileMenu()" aria-label="Menu">
    <span></span>
    <span></span>
    <span></span>
  </button>
</nav>

<!-- Menu mobile -->
<div class="mobile-menu" id="mobileMenu">
  <button id="btnPicoleMobile" class="active" onclick="mudarCategoria('picole'); closeMobileMenu()">Picolés</button>
  <button id="btnSorveteMobile" onclick="mudarCategoria('sorvete'); closeMobileMenu()">Sorvetes</button>
  <button id="btnGarrafinhaMobile" onclick="mudarCategoria('garrafinha'); closeMobileMenu()">Garrafinhas</button>
</div>

<!-- Overlay para fechar menu mobile -->
<div class="overlay" id="overlay" onclick="closeMobileMenu()"></div>

<div class="container"></div>

<!-- floating buttons: WhatsApp acima do carrinho -->
<div class="floating-buttons">
  <a id="whatsappBtn"
     class="whatsapp-btn"
     href="https://wa.me/558399474462?text=Ol%C3%A1%2C%20gostaria%20de%20saber%20sobre%20o%20card%C3%A1pio."
     target="_blank"
     rel="noopener"
     title="Falar no WhatsApp">
    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
      <path d="M20.52 3.48A11.92 11.92 0 0012 .5C6  .5 1.03 5.46 1.03 11.47c0 2.02.53 3.95 1.54 5.67L.5 23.5l6.6-1.74a11.96 11.96 0 005.9 1.54c6 0 10.97-4.96 10.97-11.47 0-3.06-1.19-5.91-3.45-8.05zM12 21.5c-1.86 0-3.69-.48-5.3-1.39l-.38-.22-3.92 1.03 1.12-3.82-.25-.39A9.5 9.5 0 012.5 11.47C2.5 6.9 6.43 3 11.98 3c1.95 0 3.82.6 5.36 1.73A9.47 9.47 0 0121.47 11.5c0 5.19-4.24 9.99-9.47 9.99zM17.1 14.36c-.28-.14-1.64-.81-1.9-.9-.26-.09-.45-.14-.64.14-.19.28-.74.9-.9 1.09-.16.19-.32.21-.6.07-.28-.14-1.18-.43-2.25-1.39-.83-.74-1.39-1.65-1.55-1.93-.16-.28-.02-.43.12-.57.12-.12.28-.32.42-.48.14-.16.19-.28.28-.46.09-.19.04-.35-.02-.49-.06-.14-.64-1.54-.88-2.1-.23-.51-.47-.44-.64-.45l-.55-.01c-.19 0-.49.07-.75.35-.26.28-1 1-1 2.43s1.03 2.81 1.17 3.01c.14.19 2.02 3.08 4.9 4.32 1.36.59 1.92.79 2.58.79.66 0 1.54-.24 1.76-.47.22-.23 1.56-1.43 1.78-2.8.22-1.37.22-2.54.15-2.8-.07-.26-.28-.39-.56-.53z"/>
    </svg>
  </a>

  <!-- carrinho -->
  <button class="sacola" onclick="abrirSacola()" aria-label="Abrir sacola" title="Abrir sacola">
    🛒
    <span id="contadorSacola">0</span>
  </button>
</div>

<!-- Pop-up da sacola -->
<div class="popup" id="popupSacola">
  <div class="popup-content" role="dialog" aria-modal="true">
    <h2>Minha Sacola</h2>
    <ul id="listaSacola"></ul>
    <p><strong>Total:</strong> R$ <span id="totalSacola">0.00</span></p>
    <input type="text" id="nomeCliente" placeholder="Seu nome" />
    <select id="formaPagamento" onchange="mostrarPix()">
      <option value="">Forma de pagamento</option>
      <option value="Dinheiro">Dinheiro</option>
      <option value="Cartão">Cartão</option>
      <option value="Pix">Pix</option>
    </select>
    <p id="pixInfo" style="display:none; font-size:13px; color:green;">
      💳 Chave Pix: 28.043.102/0001-03 
    </p>

    <button class="enviar" onclick="enviarWhatsApp()">Enviar Pedido</button>
    <button class="fechar" style="background: orange; margin-top:8px;" onclick="limparSacola()">Limpar Sacola</button>
    <button class="fechar" onclick="fecharSacola()" style="margin-left:6px;">Fechar</button>
  </div>
</div>

<script>
  const imageMap = {
  'Açaí': '001.jpg',
  'Ameixa': '002.jpg',
  'Amendoim': '003.jpg',
  'Biscoito': '004.jpg',
  'Brigadeiro': '005.jpg',
  'Cajá': '006.jpg',
  'Castanha': '007.jpg',
  'Chocolate': '008.jpg',
  'Coco': '009.jpg',
  'Creme de Dorela': '010.jpg',
  // ... continue numerando para todos os sabores
  
  // Sorvetes
  'Chocolate': '101.jpg', // números 101+ para sorvetes
  'Morango': '102.jpg',
  
  // Garrafinhas  
  'Leite Condensado': '201.jpg', // números 201+ para garrafinhas
  'Menta': '202.jpg'
};
  const sabores = {
    picole: ['Açaí',
  'Ameixa',
  'Amendoim',
  'Biscoito',
  'Brigadeiro',
  'Cajá',
  'Castanha',
  'Chocolate',
  'Coco',
  'Creme de Dorela',
  'Crocante',
  'Doce de Leite com Cobertura de Chocolate',
  'Flocos',
  'Graviola',
  'Jaca',
  'Leite Condensado',
  'Limão',
  'Mangaba',
  'Maracujá',
  'Milho Verde',
  'Morango',
  'Pedacinho do Céu',
  'Skimó',
  'Skimó Branco',
  'Skimó Maracujá',
  'Tentação',
  'Uva'],
    sorvete: ['Chocolate',
  'Chocolate Trufado',
  'Creme com Passas',
  'Delícia de Abacaxi',
  'Iogurte Grego',
  'Leitinho Trufado',
  'Morango',
  'Morango Trufado',
  'Nata Goiaba',
  'Sonho de Valsa'],
    garrafinha: ['Leite Condensado',
  'Menta',
  'Morango com Leite',
  'Morango sem Leite',
  'Pedacinho do Céu',
  'Uva com Leite',
  'Uva sem Leite']
  };

  const precos = { picole: 2.00, sorvete: 5.00, garrafinha: 2.00 };
  let categoriaAtual = 'picole';

  let sacola = JSON.parse(localStorage.getItem('sacola')) || [];
  sacola = sacola.map(i => ({ sabor: i.sabor, categoria: i.categoria, preco: i.preco ?? precos[i.categoria] ?? 0, qtd: i.qtd ? i.qtd : 1 }));

  // Funções do menu hambúrguer
  function toggleMobileMenu() {
    const hamburger = document.querySelector('.hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    const overlay = document.getElementById('overlay');
    
    hamburger.classList.toggle('active');
    mobileMenu.classList.toggle('active');
    overlay.classList.toggle('active');
  }

  function closeMobileMenu() {
    const hamburger = document.querySelector('.hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    const overlay = document.getElementById('overlay');
    
    hamburger.classList.remove('active');
    mobileMenu.classList.remove('active');
    overlay.classList.remove('active');
  }

  function salvarSacola() {
    localStorage.setItem('sacola', JSON.stringify(sacola));
  }

  function getTotalItens() {
    return sacola.reduce((s, item) => s + (item.qtd || 0), 0);
  }

  function atualizarSacola() {
    document.getElementById('contadorSacola').textContent = getTotalItens();
  }

  function mudarCategoria(categoria) {
    categoriaAtual = categoria;
    
    // Atualizar menu desktop
    document.querySelectorAll('.nav-buttons button').forEach(btn => btn.classList.remove('active'));
    const id = 'btn' + categoria.charAt(0).toUpperCase() + categoria.slice(1);
    const btnEl = document.getElementById(id);
    if (btnEl) btnEl.classList.add('active');
    
    // Atualizar menu mobile
    document.querySelectorAll('.mobile-menu button').forEach(btn => btn.classList.remove('active'));
    const idMobile = 'btn' + categoria.charAt(0).toUpperCase() + categoria.slice(1) + 'Mobile';
    const btnElMobile = document.getElementById(idMobile);
    if (btnElMobile) btnElMobile.classList.add('active');
    
    gerarCards(sabores[categoriaAtual], categoriaAtual);
  }

  function gerarCards(listaSabores, categoria) {
    const container = document.querySelector('.container');
    container.innerHTML = '';
    listaSabores.forEach(sabor => {
      const card = document.createElement('div');
      card.className = 'card';

      const img = document.createElement('img');
      img.src = `img/${categoria}/${sabor}.jpg`; 
      img.alt = sabor;
      

      const h3 = document.createElement('h3');
      h3.textContent = sabor;

      const pDesc = document.createElement('p');
      pDesc.textContent = `${categoria} sabor ${sabor}.`;

      const pPreco = document.createElement('p');
      pPreco.className = 'preco';
      pPreco.textContent = `R$ ${precos[categoria].toFixed(2)}`;

      const btnAdicionar = document.createElement('button');
      btnAdicionar.textContent = 'Adicionar';
      btnAdicionar.onclick = () => {
        adicionarSacola(sabor, categoria);
        atualizarCards();
      };

      const itemNaSacola = sacola.find(item => item.sabor === sabor && item.categoria === categoria);
      const controlesQtd = document.createElement('div');

      if (itemNaSacola) {
        const btnMinus = document.createElement('button');
        btnMinus.textContent = '-';
        btnMinus.className = 'btn-small';
        btnMinus.onclick = () => {
          diminuirQtd(sacola.indexOf(itemNaSacola));
          atualizarCards();
        };

        const spanQtd = document.createElement('span');
        spanQtd.textContent = itemNaSacola.qtd;
        spanQtd.style.margin = '0 8px';

        const btnPlus = document.createElement('button');
        btnPlus.textContent = '+';
        btnPlus.className = 'btn-small';
        btnPlus.onclick = () => {
          aumentarQtd(sacola.indexOf(itemNaSacola));
          atualizarCards();
        };

        controlesQtd.appendChild(btnMinus);
        controlesQtd.appendChild(spanQtd);
        controlesQtd.appendChild(btnPlus);
      }

      card.innerHTML = '';
      card.appendChild(img);
      card.appendChild(h3);
      card.appendChild(pDesc);
      card.appendChild(pPreco);

      if (itemNaSacola) {
        card.appendChild(controlesQtd);
      } else {
        card.appendChild(btnAdicionar);
      }

      container.appendChild(card);
    });
  }

  function atualizarCards() {
    gerarCards(sabores[categoriaAtual], categoriaAtual);
    atualizarSacola();
  }

  function adicionarSacola(sabor, categoria) {
    const existente = sacola.find(item => item.sabor === sabor && item.categoria === categoria);
    if (existente) {
      existente.qtd = (existente.qtd || 1) + 1;
    } else {
      sacola.push({ sabor, categoria, preco: precos[categoria], qtd: 1 });
    }
    salvarSacola();
    atualizarSacola();
  }

  function aumentarQtd(index) {
    if (!sacola[index]) return;
    sacola[index].qtd = (sacola[index].qtd || 0) + 1;
    salvarSacola();
    atualizarSacola();
  }

  function diminuirQtd(index) {
    if (!sacola[index]) return;
    if ((sacola[index].qtd || 0) > 1) {
      sacola[index].qtd--;
    } else {
      sacola.splice(index, 1);
    }
    salvarSacola();
    atualizarSacola();
  }

  function limparSacola() {
    if (sacola.length === 0) {
      alert('Sua sacola já está vazia.');
      return;
    }
    if (confirm('Tem certeza que deseja limpar a sacola?')) {
      sacola = [];
      salvarSacola();
      atualizarSacola();
      fecharSacola();
    }
  }

  function calcularTotal() {
    return sacola.reduce((total, item) => total + (item.preco * (item.qtd || 0)), 0);
  }

  function abrirSacola() {
    if (sacola.length === 0) {
      alert('Sua sacola está vazia!');
      return;
    }
    const listaEl = document.getElementById('listaSacola');
    listaEl.innerHTML = '';
    sacola.forEach((item, index) => {
      const li = document.createElement('li');

      const titleDiv = document.createElement('div');
      titleDiv.innerHTML = `<strong>${item.sabor}</strong> (${item.categoria})`;

      const priceDiv = document.createElement('div');
      priceDiv.textContent = `R$ ${item.preco.toFixed(2)} x ${item.qtd} = R$ ${(item.preco * item.qtd).toFixed(2)}`;

      const controls = document.createElement('div');
      controls.style.marginTop = '6px';

      const btnMinus = document.createElement('button');
      btnMinus.className = 'btn-small';
      btnMinus.textContent = '-';
      btnMinus.onclick = () => {
        diminuirQtd(index);
        abrirSacola();
      };

      const spanQtd = document.createElement('span');
      spanQtd.style.margin = '0 8px';
      spanQtd.textContent = item.qtd;

      const btnPlus = document.createElement('button');
      btnPlus.className = 'btn-small';
      btnPlus.textContent = '+';
      btnPlus.onclick = () => {
        aumentarQtd(index);
        abrirSacola();
      };

      const btnRemove = document.createElement('button');
      btnRemove.className = 'btn-small';
      btnRemove.style.marginLeft = '8px';
      btnRemove.textContent = 'Remover';
      btnRemove.onclick = () => {
        if (confirm('Remover este item da sacola?')) {
          sacola.splice(index, 1);
          salvarSacola();
          if (sacola.length) abrirSacola(); else fecharSacola();
          atualizarSacola();
        }
      };

      controls.appendChild(btnMinus);
      controls.appendChild(spanQtd);
      controls.appendChild(btnPlus);
      controls.appendChild(btnRemove);

      li.appendChild(titleDiv);
      li.appendChild(priceDiv);
      li.appendChild(controls);

      listaEl.appendChild(li);
    });

    document.getElementById('totalSacola').textContent = calcularTotal().toFixed(2);
    document.getElementById('popupSacola').style.display = 'flex';
  }

  function fecharSacola() {
    document.getElementById('popupSacola').style.display = 'none';
  }

  document.getElementById('popupSacola').addEventListener('click', function(e) {
    if (e.target.id === 'popupSacola') fecharSacola();
  });

  function mostrarPix() {
    const forma = document.getElementById('formaPagamento').value;
    document.getElementById('pixInfo').style.display = forma === 'Pix' ? 'block' : 'none';
  }

  function enviarWhatsApp() {
    const nome = document.getElementById('nomeCliente').value.trim();
    const pagamento = document.getElementById('formaPagamento').value;

    if (!nome || !pagamento) {
      alert('Por favor, preencha seu nome e a forma de pagamento.');
      return;
    }

    let mensagem = `🛒 Pedido de ${nome}:\n`;
    sacola.forEach(item => {
      mensagem += `- ${item.sabor} (${item.categoria}) x${item.qtd} = R$ ${(item.preco * item.qtd).toFixed(2)}\n`;
    });
    mensagem += `\n💰 Total: R$ ${calcularTotal().toFixed(2)}`;
    mensagem += `\n💳 Pagamento: ${pagamento}`;
    if (pagamento === 'Pix') mensagem += `\n🔑 Chave Pix: 28.043.102/0001-03`;

    const telefone = '558399474462';
    const url = `https://api.whatsapp.com/send?phone=${telefone}&text=${encodeURIComponent(mensagem)}`;
    window.open(url, '_blank');

    sacola = [];
    salvarSacola();
    atualizarSacola();
    fecharSacola();
  }

  // Fechar menu mobile ao clicar fora
  document.addEventListener('click', function(e) {
    const mobileMenu = document.getElementById('mobileMenu');
    const hamburger = document.querySelector('.hamburger');
    
    if (mobileMenu.classList.contains('active') && 
        !mobileMenu.contains(e.target) && 
        !hamburger.contains(e.target)) {
      closeMobileMenu();
    }
  });

  gerarCards(sabores[categoriaAtual], categoriaAtual);
  atualizarSacola();
  
</script>

</body>
</html>

